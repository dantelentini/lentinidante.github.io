/* ===== Font faces ===== */
@font-face{
  font-family:"Family"; font-style:normal; font-weight:400; font-display:swap;
  src:url("../fonts/family-regular.woff2") format("woff2");
}
@font-face{
  font-family:"Family"; font-style:normal; font-weight:700; font-display:swap;
  src:url("../fonts/family-bold.woff2") format("woff2");
}
/* Signature font: Caveat */
@font-face{
  font-family:"Caveat"; font-style:normal; font-weight:400; font-display:swap;
  src:url(https://fonts.gstatic.com/s/caveat/v18/WnznHAc5bAfYB2QRah7pcpNvOx-pjfJ9eIWpYT5Kmgq3sw.woff2) format("woff2");
}

/* ===== Theme tokens ===== */
:root{
  --bg: rgb(0,100,230);
  --fg: rgb(194, 246, 255);       /* body text color */
  --fg-strong: #fff;
  --link: rgb(194, 246, 255);     /* link color */
  --link-hover: #fff;             /* link hover color */
  --muted: rgb(194, 246, 255);    /* muted text color */
  --gap-xs: 8px; --gap-sm: 12px; --gap: 16px; --gap-lg: 32px;
}

html,body{height:100%}
html{box-sizing:border-box}
*,*::before,*::after{box-sizing:inherit}

/* ===== Base ===== */
body{
  margin:40px; padding:env(safe-area-inset);
  background:var(--bg); color:var(--fg);
  font-family:"Family",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  font-size:22px; line-height:1.2;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;

  display:flex; align-items:center; justify-content:center; min-height:100dvh;
  overflow-x:auto; /* allow horizontal scroll on narrow screens */
}

/* Center column */
.container{
  max-width:520px; 
  width:100%; 
  margin:0 auto;
  position: relative;
  z-index: 5;
}

/* ===== Typography & spacing ===== */
h1.name{
  margin:0 0 16px;
  font-size:40px;          /* heading size */
  line-height:1.02;
  color:var(--fg-strong);
  white-space:nowrap;      /* prevent wrapping */
  overflow-wrap:normal;
}

.interest-line{
  margin:0 0 var(--gap);
  font-size:20px;
  line-height:1.3;
  color:var(--fg);
  display: block;
}

.interest-line p {
  margin: 0;
}

/* Interest buttons use clean default styling with Arial font */
.interest-trigger {
  font-family: Arial, system-ui, -apple-system, sans-serif;
  font-size: 15px;
  font-weight: normal;
  line-height: inherit;
  color: #000;
  background: #e8e8e8;
  border: 1.2px solid #999;
  border-radius: 2px;
  padding: 1px 6px;
  margin: 0;
  margin-right: 1px;
  cursor: pointer;
  text-align: center;
  display: inline-block;
  z-index: 3; /* ensure buttons sit above floating overlay */
}

.interest-trigger:hover {
  background: #d8d8d8;
  border: 1.2px solid #000000;
}

/* Dark mode button styling */
body.dark-mode .interest-trigger {
  color: #f0f0f0;
  background: rgba(255, 255, 255, 0.1);
  border: 1.2px solid rgba(255, 255, 255, 0.3);
  pointer-events: none; /* Disable during beat switching */
  cursor: default;
}

body.dark-mode .interest-trigger:hover {
  background: rgba(255, 255, 255, 0.15);
  border: 1.2px solid rgba(255, 255, 255, 0.4);
}


.interest-trigger:active {
  background: #ddd;
  border-color: #777;
}

.interest-trigger:focus {
  outline: 1px dotted #666;
  outline-offset: 1px;
}

.interest-trigger.beat-active,
body.dark-mode .interest-trigger.beat-active {
  background: #007acc !important;
  color: #fff !important;
  border: 1.2px solid #005a9e !important;
  box-shadow: 0 0 8px rgba(0, 122, 204, 0.6) !important;
  transform: scale(1.05);
  transition: all 0.1s ease;
}

/* Pinned visual state for interest buttons - same as hover */
.interest-trigger.pinned{
  background: #d8d8d8;
  border: 1.2px solid #000000;
}

/* Pure CSS hover - VISUAL ONLY on hover, INTERACTIVE when pinned */

/* Show clusters visually on hover (no interaction) */
body:has(.interest-trigger[data-interest="read"]:hover):not(:has(.interest-trigger.pinned)) .floating-cluster[data-interest="read"],
body:has(.interest-trigger[data-interest="write"]:hover):not(:has(.interest-trigger.pinned)) .floating-cluster[data-interest="write"],
body:has(.interest-trigger[data-interest="listen"]:hover):not(:has(.interest-trigger.pinned)) .floating-cluster[data-interest="listen"] {
  opacity: 1;
  pointer-events: none; /* VISUAL ONLY - not clickable on hover */
}

body:has(.interest-trigger[data-interest="read"]:hover):not(:has(.interest-trigger.pinned)) .floating-cluster[data-interest="read"] .floating-item,
body:has(.interest-trigger[data-interest="write"]:hover):not(:has(.interest-trigger.pinned)) .floating-cluster[data-interest="write"] .floating-item,
body:has(.interest-trigger[data-interest="listen"]:hover):not(:has(.interest-trigger.pinned)) .floating-cluster[data-interest="listen"] .floating-item {
  opacity: 1;
  transform: translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(1);
}

/* Show clusters interactively when button is pinned */
body:has(.interest-trigger[data-interest="read"].pinned) .floating-cluster[data-interest="read"],
body:has(.interest-trigger[data-interest="write"].pinned) .floating-cluster[data-interest="write"],
body:has(.interest-trigger[data-interest="listen"].pinned) .floating-cluster[data-interest="listen"] {
  opacity: 1;
  pointer-events: auto; /* INTERACTIVE when pinned */
}

body:has(.interest-trigger[data-interest="read"].pinned) .floating-cluster[data-interest="read"] .floating-item,
body:has(.interest-trigger[data-interest="write"].pinned) .floating-cluster[data-interest="write"] .floating-item,
body:has(.interest-trigger[data-interest="listen"].pinned) .floating-cluster[data-interest="listen"] .floating-item {
  opacity: 1;
  transform: translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(1);
}


.desc p{ margin:0 0 var(--gap-xs); line-height:1.2; }

/* Spacing around “Prior;” */
.desc .muted{
  margin:24px 0;           /* blank line spacing */
  color:var(--muted);
}

/* Links */
a{
  color:var(--link);
  text-decoration: underline;
  text-underline-offset:2px;
}
a:hover{ color:var(--link-hover); }
a:focus-visible{ outline:2px dotted currentColor; outline-offset:2px; }

/* Company links */
a.company{ color:var(--fg-strong); text-decoration:none; }
a.company:hover{ text-decoration: underline; }

/* Signature block */
/* Spacing under “Best,” */
#sign{ margin-top:var(--gap-lg); margin-bottom:2px; }
#sign p{ margin:0 0 2px; }
#signature{
  margin-top:0;
  font-family:"Caveat",cursive;
  font-size:30px;
  color:var(--fg-strong);
  line-height:1;
}
#signature a,#signature a:visited{ color:inherit; text-decoration:none; }

/* Social row */
.social ul{
  display:flex; gap:16px; list-style:none; padding:0; margin:var(--gap) 0 0;
}
.social-link{ font-size:18px; color:var(--link); }
.social-link:hover{ color:var(--link-hover); text-decoration:overline; }

/* ===== Star canvas ===== */
#starCanvas{
  position:fixed; inset:0; width:100%; height:100%;
  z-index:0; pointer-events:none; /* pass-through clicks */
}
body *{ position:relative; z-index:1; }

/* Ensure links and interactive elements are clickable above everything */
a, 
a.company,
a.social-link,
.social-link, 
#modeToggle, 
button:not(.interest-trigger),
nav,
nav *,
.social,
.social * {
  z-index: 100 !important;
  position: relative !important;
  pointer-events: auto !important; /* Always clickable */
}

.floating-layer,
.floating-layer *{
  position:absolute;
  z-index:2;
}

.floating-layer{
  position:fixed;
  inset:0;
  pointer-events:none;
}

.floating-cluster{
  inset:0;
  opacity:0;
  transition:opacity 0.25s ease;
  pointer-events:none;
}

.floating-cluster.active{
  opacity:1;
  pointer-events:auto;
}

.floating-item{
  top:var(--y, 50%);
  left:var(--x, 50%);
  width:var(--width, 120px);
  height:var(--height, 160px);
  transform:translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(0.92);
  transform-origin:center;
  border-radius:12px;
  background-color:rgba(255,255,255,0.35);
  background-image:var(--image);
  background-size:cover;
  background-position:center;
  box-shadow:0 14px 30px rgba(10, 30, 60, 0.25);
  opacity:0;
  transition:opacity 0.35s ease, transform 0.35s ease;
}

.floating-cluster.active .floating-item{
  opacity:1;
  transform:translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(1);
}

.floating-item.book{
  --width:120px;
  --height:168px;
  border-radius:10px;
}

.floating-item.paper{
  --width:132px;
  --height:172px;
  border-radius:6px;
  background-image:
    linear-gradient(135deg, rgba(255,255,255,0.9), rgba(230,240,255,0.65));
  box-shadow:0 12px 28px rgba(12, 32, 66, 0.2);
}

.floating-item.paper::after{
  content:"";
  position:absolute;
  inset:14px;
  border-radius:4px;
  border:1px dashed rgba(0, 32, 86, 0.3);
}

.floating-item.album{
  --width:150px;
  --height:150px;
  border-radius:18px;
}

.floating-item.clickable-album{
  cursor: pointer;
  pointer-events: none; /* Not clickable by default (when invisible) */
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

/* Albums only clickable when their cluster is shown and interactive (pinned) */
body:has(.interest-trigger[data-interest="listen"].pinned) .floating-cluster[data-interest="listen"] .floating-item.clickable-album {
  pointer-events: auto; /* Now clickable when pinned */
}


.floating-item.clickable-album:hover{
  box-shadow: 0 18px 35px rgba(10, 30, 60, 0.35);
}

.floating-item.clickable-album.album-hover{
  transform: translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(1.05);
}

.floating-item.clickable-album.playing{
  transform: translate(-50%, -50%) rotate(var(--rotation, 0deg)) scale(1);
  box-shadow: 0 0 20px rgba(0, 122, 204, 0.8), 0 18px 35px rgba(10, 30, 60, 0.4);
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0% { box-shadow: 0 0 20px rgba(0, 122, 204, 0.8), 0 18px 35px rgba(10, 30, 60, 0.4); }
  50% { box-shadow: 0 0 30px rgba(0, 122, 204, 1), 0 18px 35px rgba(10, 30, 60, 0.4); }
  100% { box-shadow: 0 0 20px rgba(0, 122, 204, 0.8), 0 18px 35px rgba(10, 30, 60, 0.4); }
}


@media (max-width:640px){
  .floating-item{
    --width:90px;
    --height:120px;
    box-shadow:0 10px 18px rgba(10, 30, 60, 0.2);
  }

  .floating-item.album{
    --width:110px;
    --height:110px;
  }
}


/* ===== Dark mode ===== */
body.dark-mode {
  background: #0a0a0b;
  color: #f0f0f0;

  /* Theme tokens in dark mode */
  --fg: #f0f0f0;
  --muted: #f0f0f0;
  --link: #f0f0f0;
  --link-hover: #fff;
}

body.dark-mode a,
body.dark-mode .social-link {
  color: var(--link);
}

body.dark-mode a:hover,
body.dark-mode .social-link:hover {
  color: var(--link-hover);
}
