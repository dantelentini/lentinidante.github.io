<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dante Lentini</title>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
    <main>
        <!-- Content Display Areas -->
        <div class="content-grid">
            <div class="content-items" id="content-items">
                <!-- Content will be dynamically populated here -->
            </div>
        </div>
        
        <h1>Hi,</h1>
        <p>
            I like to <button id="read-btn">read</button>, <button id="write-btn">write</button>, and <button id="listen-btn">listen</button>.<br><br>
            I'm a Growth Hacker. In my past, I<br>
            left college, made <span class="white">tiktoks</span> and joined<br>
            <span class="white">startups</span>â€” all of which led me to SF,<br>
            where I'm now at <span class="white">Founders, Inc.</span>
        </p>
        <div class="signature">
         MSHF,<br>
            Dante Lentini
        </div>
        <nav class="social-links">
            <a href="mailto:dantelentinics@gmail.com">Email</a>
            <a href="https://linkedin.com/in/lentinidante" target="_blank">LinkedIn</a>
            <a href="https://x.com/lentinidante" target="_blank">X</a>
            <a href="momsaidhavefun.pdf" target="_blank"><3</a>
            <a href="#">dark-mode.exe</a>
        </nav>
    </main>
    
    <!-- Audio element for music playback -->
    <audio id="audio-player" preload="none"></audio>
    
    <script>
        // Content data
        const contentData = {
            read: [
                { type: 'book', image: 'assets/images/books/blue_ocean.jpg', title: 'Blue Ocean Strategy' },
                { type: 'book', image: 'assets/images/books/build.jpg', title: 'Build' },
                { type: 'book', image: 'assets/images/books/founding_sales.jpg', title: 'Founding Sales' },
                { type: 'book', image: 'assets/images/books/lean_startup.jpg', title: 'The Lean Startup' },
                { type: 'book', image: 'assets/images/books/read_write_own.jpg', title: 'Read Write Own' },
                { type: 'book', image: 'assets/images/books/the_cold_start.jpg', title: 'The Cold Start Problem' },
                { type: 'book', image: 'assets/images/books/the_courage.jpg', title: 'The Courage to be Disliked' },
                { type: 'book', image: 'assets/images/books/total_freedom.jpg', title: 'Total Freedom' }
            ],
            write: [
                { type: 'letter', image: 'assets/images/books/blue_ocean.jpg', title: 'Letter 1' },
                { type: 'letter', image: 'assets/images/books/build.jpg', title: 'Letter 2' },
                { type: 'letter', image: 'assets/images/books/founding_sales.jpg', title: 'Letter 3' },
                { type: 'letter', image: 'assets/images/books/lean_startup.jpg', title: 'Letter 4' },
                { type: 'letter', image: 'assets/images/books/read_write_own.jpg', title: 'Letter 5' },
                { type: 'letter', image: 'assets/images/books/the_cold_start.jpg', title: 'Letter 6' },
                { type: 'letter', image: 'assets/images/books/the_courage.jpg', title: 'Letter 7' },
                { type: 'letter', image: 'assets/images/books/total_freedom.jpg', title: 'Letter 8' }
            ],
            listen: [
                { type: 'album', image: 'assets/images/albums/album-01.jpg', title: 'Track 01', audio: 'assets/audio/track-01.mp3' },
                { type: 'album', image: 'assets/images/albums/album-02.jpg', title: 'Track 02', audio: 'assets/audio/track-02.mp3' },
                { type: 'album', image: 'assets/images/albums/album-03.jpg', title: 'Track 03', audio: 'assets/audio/track-03.mp3' },
                { type: 'album', image: 'assets/images/albums/album-04.jpg', title: 'Track 04', audio: 'assets/audio/track-04.mp3' },
                { type: 'album', image: 'assets/images/albums/album-05.jpg', title: 'Track 05', audio: 'assets/audio/track-05.mp3' },
                { type: 'album', image: 'assets/images/albums/album-06.jpg', title: 'Track 06', audio: 'assets/audio/track-06.mp3' },
                { type: 'album', image: 'assets/images/albums/album-07.jpg', title: 'Track 07', audio: 'assets/audio/track-07.mp3' },
                { type: 'album', image: 'assets/images/albums/album-08.jpg', title: 'Track 08', audio: 'assets/audio/track-08.mp3' }
            ]
        };

        // DOM elements
        const readBtn = document.getElementById('read-btn');
        const writeBtn = document.getElementById('write-btn');
        const listenBtn = document.getElementById('listen-btn');
        const contentItems = document.getElementById('content-items');
        const audioPlayer = document.getElementById('audio-player');

        let currentMode = null;
        let currentlyPlaying = null;
        let isButtonActive = false; // Track if a button is actively pressed
        let hasUserInteracted = false; // Track if user has interacted for mobile audio
        let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

        // Track user interaction for mobile audio
        function markUserInteracted() {
            hasUserInteracted = true;
        }

        // Button event listeners
        readBtn.addEventListener('click', () => {
            markUserInteracted();
            if (currentMode === 'read' && isButtonActive) {
                // If same button is clicked and active, deactivate it
                hideContent();
            } else {
                isButtonActive = true;
                showContent('read');
            }
        });
        writeBtn.addEventListener('click', () => {
            markUserInteracted();
            if (currentMode === 'write' && isButtonActive) {
                // If same button is clicked and active, deactivate it
                hideContent();
            } else {
                isButtonActive = true;
                showContent('write');
            }
        });
        listenBtn.addEventListener('click', () => {
            markUserInteracted();
            if (currentMode === 'listen' && isButtonActive) {
                // If same button is clicked and active, deactivate it
                hideContent();
            } else {
                isButtonActive = true;
                showContent('listen');
            }
        });

        // Hover event listeners
        readBtn.addEventListener('mouseenter', () => {
            if (!isButtonActive) {
                showContent('read');
            }
        });
        writeBtn.addEventListener('mouseenter', () => {
            if (!isButtonActive) {
                showContent('write');
            }
        });
        listenBtn.addEventListener('mouseenter', () => {
            if (!isButtonActive) {
                showContent('listen');
            }
        });

        // Mouse leave events to hide content when not hovering (only if no button is active)
        [readBtn, writeBtn, listenBtn].forEach(btn => {
            btn.addEventListener('mouseleave', () => {
                setTimeout(() => {
                    if (!isHoveringAnyButton() && !isButtonActive) {
                        hideContent();
                    }
                }, 100);
            });
        });

        // Click outside to deactivate button mode (but not on mobile)
        document.addEventListener('click', (e) => {
            if (!isMobile && !readBtn.contains(e.target) && !writeBtn.contains(e.target) && !listenBtn.contains(e.target)) {
                isButtonActive = false;
                if (!isHoveringAnyButton()) {
                    hideContent();
                }
            }
        });

        function isHoveringAnyButton() {
            return readBtn.matches(':hover') || writeBtn.matches(':hover') || listenBtn.matches(':hover');
        }

        function showContent(mode) {
            // Remove active class from all buttons
            [readBtn, writeBtn, listenBtn].forEach(btn => btn.classList.remove('active'));
            
            // Add active class to current button
            document.getElementById(mode + '-btn').classList.add('active');

            // Update current mode
            currentMode = mode;

            // Clear existing content
            contentItems.innerHTML = '';

            // Add new content items
            contentData[mode].forEach((item, index) => {
                const contentItem = document.createElement('div');
                contentItem.className = 'content-item';
                contentItem.innerHTML = `<img src="${item.image}" alt="${item.title}" title="${item.title}">`;
                
                // Add click event for albums
                if (item.type === 'album') {
                    contentItem.addEventListener('click', (e) => {
                        e.stopPropagation();
                        markUserInteracted();
                        playAudio(item.audio, contentItem);
                    });
                }
                
                contentItems.appendChild(contentItem);
            });

            // Set the data mode for CSS targeting
            contentItems.setAttribute('data-mode', mode);
            
            // Show content with animation
            contentItems.classList.add('active');
        }

        function hideContent() {
            contentItems.classList.remove('active');
            [readBtn, writeBtn, listenBtn].forEach(btn => btn.classList.remove('active'));
            currentMode = null;
            isButtonActive = false;
        }

        function playAudio(audioSrc, element) {
            // If clicking the same track, toggle play/pause
            if (currentlyPlaying === audioSrc) {
                if (!audioPlayer.paused) {
                    audioPlayer.pause();
                } else {
                    // For mobile, ensure user has interacted
                    if (isMobile && !hasUserInteracted) {
                        return;
                    }
                    audioPlayer.play().catch(error => {
                        console.log('Audio playback failed:', error);
                    });
                }
                return;
            }

            // Stop currently playing audio and start new one
            if (currentlyPlaying) {
                audioPlayer.pause();
                audioPlayer.currentTime = 0;
            }

            // Set audio source
            audioPlayer.src = audioSrc;
            audioPlayer.load(); // Ensure audio is loaded
            
            // For mobile, ensure user has interacted before playing
            if (isMobile && !hasUserInteracted) {
                return;
            }

            // Play new audio with proper error handling
            const playPromise = audioPlayer.play();
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    currentlyPlaying = audioSrc;
                    // Add visual feedback for mobile
                    if (isMobile && element) {
                        element.style.opacity = '0.7';
                        setTimeout(() => {
                            element.style.opacity = '1';
                        }, 200);
                    }
                }).catch(error => {
                    console.log('Audio playback failed:', error);
                    // On mobile, this might be due to autoplay policy
                    if (isMobile) {
                        console.log('Mobile audio requires user interaction');
                    }
                });
            }
        }

        // Handle audio events
        audioPlayer.addEventListener('ended', () => {
            currentlyPlaying = null;
        });

        audioPlayer.addEventListener('error', () => {
            console.log('Audio error occurred');
            currentlyPlaying = null;
        });

        // Add touch event listeners for mobile
        if (isMobile) {
            document.addEventListener('touchstart', markUserInteracted, { once: true });
            document.addEventListener('touchend', markUserInteracted, { once: true });
        }
    </script>
</body>
</html>

